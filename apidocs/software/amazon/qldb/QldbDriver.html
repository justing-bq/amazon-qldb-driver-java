<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.9) on Wed Nov 25 22:33:56 UTC 2020 -->
<title>QldbDriver (Amazon QLDB Java Driver 2.0.0)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-11-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="QldbDriver (Amazon QLDB Java Driver 2.0.0)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":1,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QldbDriver.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Amazon QLDB Java Driver 2.0.0 API Reference</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">software.amazon.qldb</a></div>
<h2 title="Interface QldbDriver" class="title">Interface QldbDriver</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">QldbDriver</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></pre>
<div class="block"><p>The driver for Amazon QLDB.</p>

 <p>The main goal of the driver is to receive lambda functions that are passed to any of its execute methods.
 The code in these lambda functions should be idempotent as the lambda function might be
 called more than once based on the TransactionRetryPolicy.
 </p>

 <h3>Idempotency:</h3>
 <p>A transaction needs to be idempotent to avoid undesirable side effects.</p>

 <p>For example, consider the below transaction which inserts a document into People table. It first checks if the document
 already exists in the table or not. So even if this transaction is executed multiple times, it will not cause any side
 effects.</p>

 <p>Without this check, the transaction might duplicate documents in the table if it is retried. A retry may happen when the
 transaction commits successfully on QLDB server side, but the driver/client timeouts waiting for a response.</p>

 For example, the following code shows a lambda that is retryable:
 <pre><code>
 driver.execute(txn -&gt; {
     Result result = txn.execute("SELECT firstName, age, lastName FROM People WHERE firstName = 'Bob'");
     boolean recordExists = result.iterator().hasNext();
     if (recordExists) {
        txn.execute("UPDATE People SET age = 32 WHERE firstName = 'Bob'");
     } else {
        txn.execute("INSERT INTO People {'firstName': 'Bob', 'lastName': 'Doe', 'age':32}");
     }
 });
 </code></pre>

 <h3>Instantiating the driver</h3>
 The driver can be instantiated using the <a href="QldbDriverBuilder.html" title="interface in software.amazon.qldb"><code>QldbDriverBuilder</code></a>. Example:

 <pre><code>
     QldbSessionClientBuilder sessionClientBuilder = QldbSessionClient.builder();

     QldbDriverBuilder builder = QldbDriver
          .builder()
          .ledger(ledger);
          .maxConcurrentTransactions(poolLimit)
          .transactionRetryPolicy(RetryPolicy.maxRetries(3));
          .sessionClientBuilder(sessionClientBuilder)
          .build();
 </code></pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="QldbDriverBuilder.html" title="interface in software.amazon.qldb">QldbDriverBuilder</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#builder()">builder</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#execute(software.amazon.qldb.Executor)">execute</a></span>&#8203;(<a href="Executor.html" title="interface in software.amazon.qldb">Executor</a>&lt;T&gt;&nbsp;executor)</code></th>
<td class="colLast">
<div class="block">Execute the Executor lambda against QLDB and retrieve the result within a transaction.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#execute(software.amazon.qldb.Executor,software.amazon.qldb.RetryPolicy)">execute</a></span>&#8203;(<a href="Executor.html" title="interface in software.amazon.qldb">Executor</a>&lt;T&gt;&nbsp;executor,
       <a href="RetryPolicy.html" title="class in software.amazon.qldb">RetryPolicy</a>&nbsp;retryPolicy)</code></th>
<td class="colLast">
<div class="block">Execute the Executor lambda against QLDB and retrieve the result within a transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#execute(software.amazon.qldb.ExecutorNoReturn)">execute</a></span>&#8203;(<a href="ExecutorNoReturn.html" title="interface in software.amazon.qldb">ExecutorNoReturn</a>&nbsp;executor)</code></th>
<td class="colLast">
<div class="block">Execute the Executor lambda against QLDB within a transaction where no result is expected.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#execute(software.amazon.qldb.ExecutorNoReturn,software.amazon.qldb.RetryPolicy)">execute</a></span>&#8203;(<a href="ExecutorNoReturn.html" title="interface in software.amazon.qldb">ExecutorNoReturn</a>&nbsp;executor,
       <a href="RetryPolicy.html" title="class in software.amazon.qldb">RetryPolicy</a>&nbsp;retryPolicy)</code></th>
<td class="colLast">
<div class="block">Execute the Executor lambda against QLDB within a transaction where no result is expected.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTableNames()">getTableNames</a></span>()</code></th>
<td class="colLast">
<div class="block">Retrieve the table names that are available within the ledger.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.AutoCloseable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang" class="externalLink">close</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="execute(software.amazon.qldb.ExecutorNoReturn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre class="methodSignature">void&nbsp;execute&#8203;(<a href="ExecutorNoReturn.html" title="interface in software.amazon.qldb">ExecutorNoReturn</a>&nbsp;executor)</pre>
<div class="block">Execute the Executor lambda against QLDB within a transaction where no result is expected.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executor</code> - A lambda with no return value representing the block of code to be executed within the transaction.
              This cannot have any side effects as it may be invoked multiple times.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>software.amazon.awssdk.core.exception.SdkException</code> - if there is an error executing against QLDB.</dd>
</dl>
</li>
</ul>
<a id="execute(software.amazon.qldb.ExecutorNoReturn,software.amazon.qldb.RetryPolicy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre class="methodSignature">void&nbsp;execute&#8203;(<a href="ExecutorNoReturn.html" title="interface in software.amazon.qldb">ExecutorNoReturn</a>&nbsp;executor,
             <a href="RetryPolicy.html" title="class in software.amazon.qldb">RetryPolicy</a>&nbsp;retryPolicy)</pre>
<div class="block"><p>Execute the Executor lambda against QLDB within a transaction where no result is expected.</p>

 This method accepts a RetryPolicy that overrides the RetryPolicy set when creating the driver. Use it
 to customize the backoff delay used when retrying transactions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executor</code> - A lambda with no return value representing the block of code to be executed within the transaction.
              This cannot have any side effects as it may be invoked multiple times.</dd>
<dd><code>retryPolicy</code> - A <a href="RetryPolicy.html" title="class in software.amazon.qldb"><code>RetryPolicy</code></a> that overrides the RetryPolicy set when creating the driver. The given retry policy
              will be used when retrying the transaction.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/TransactionAbortedException.html" title="class in software.amazon.qldb.exceptions">TransactionAbortedException</a></code> - if the Executor lambda calls <a href="TransactionExecutor.html#abort()"><code>TransactionExecutor.abort()</code></a>.</dd>
<dd><code>software.amazon.awssdk.core.exception.SdkException</code> - if there is an error executing against QLDB.</dd>
</dl>
</li>
</ul>
<a id="execute(software.amazon.qldb.Executor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre class="methodSignature">&lt;T&gt;&nbsp;T&nbsp;execute&#8203;(<a href="Executor.html" title="interface in software.amazon.qldb">Executor</a>&lt;T&gt;&nbsp;executor)</pre>
<div class="block">Execute the Executor lambda against QLDB and retrieve the result within a transaction.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of value that will be returned.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executor</code> - A lambda representing the block of code to be executed within the transaction. This cannot have any
              side effects as it may be invoked multiple times, and the result cannot be trusted until the
              transaction is committed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The return value of executing the executor. Note that if you directly return a <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a>, this will
         be automatically buffered in memory before the implicit commit to allow reading, as the commit will close
         any open results. Any other <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a> instances created within the executor block will be
         invalidated, including if the return value is an object which nests said <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a> instances within
         it.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/TransactionAbortedException.html" title="class in software.amazon.qldb.exceptions">TransactionAbortedException</a></code> - if the Executor lambda calls <a href="TransactionExecutor.html#abort()"><code>TransactionExecutor.abort()</code></a>.</dd>
<dd><code>software.amazon.awssdk.core.exception.SdkException</code> - if there is an error executing against QLDB.</dd>
</dl>
</li>
</ul>
<a id="execute(software.amazon.qldb.Executor,software.amazon.qldb.RetryPolicy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre class="methodSignature">&lt;T&gt;&nbsp;T&nbsp;execute&#8203;(<a href="Executor.html" title="interface in software.amazon.qldb">Executor</a>&lt;T&gt;&nbsp;executor,
              <a href="RetryPolicy.html" title="class in software.amazon.qldb">RetryPolicy</a>&nbsp;retryPolicy)</pre>
<div class="block">Execute the Executor lambda against QLDB and retrieve the result within a transaction.

 This method accepts a RetryPolicy that overrides the RetryPolicy set when creating the driver. Use it
 to customize the backoff delay used when retrying transactions.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of value that will be returned.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executor</code> - A lambda representing the block of code to be executed within the transaction. This cannot have any
              side effects as it may be invoked multiple times, and the result cannot be trusted until the
              transaction is committed.</dd>
<dd><code>retryPolicy</code> - A <a href="RetryPolicy.html" title="class in software.amazon.qldb"><code>RetryPolicy</code></a> that overrides the RetryPolicy set when creating the driver. The given retry policy
              will be used when retrying the transaction.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The return value of executing the executor. Note that if you directly return a <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a>, this will
         be automatically buffered in memory before the implicit commit to allow reading, as the commit will close
         any open results. Any other <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a> instances created within the executor block will be
         invalidated, including if the return value is an object which nests said <a href="Result.html" title="interface in software.amazon.qldb"><code>Result</code></a> instances within
         it.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/TransactionAbortedException.html" title="class in software.amazon.qldb.exceptions">TransactionAbortedException</a></code> - if the Executor lambda calls <a href="TransactionExecutor.html#abort()"><code>TransactionExecutor.abort()</code></a>.</dd>
<dd><code>software.amazon.awssdk.core.exception.SdkException</code> - if there is an error executing against QLDB.</dd>
</dl>
</li>
</ul>
<a id="getTableNames()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableNames</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;&nbsp;getTableNames()</pre>
<div class="block">Retrieve the table names that are available within the ledger.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The Iterable over the table names in the ledger.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this QldbSession has been closed already, or if the transaction's commit
                               digest does not match the response from QLDB.</dd>
<dd><code>software.amazon.awssdk.core.exception.SdkException</code> - if there is an error communicating with QLDB.</dd>
</dl>
</li>
</ul>
<a id="builder()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>builder</h4>
<pre class="methodSignature">static&nbsp;<a href="QldbDriverBuilder.html" title="interface in software.amazon.qldb">QldbDriverBuilder</a>&nbsp;builder()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QldbDriver.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Amazon QLDB Java Driver 2.0.0 API Reference</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><center>Copyright &#169; 2014&ndash;2020 Amazon.com. All Rights Reserved.</center></small></p>
</footer>
</body>
</html>
